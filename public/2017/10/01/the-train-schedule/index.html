    <!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<meta name="description" content="A website built through Hugo and blogdown.">
		<meta name="generator" content="Hugo 0.27" />
		<title>The Train Schedule &middot; Maximuming At The Peak</title>
		<link rel="shortcut icon" href="/images/favicon.ico">
		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/highlight.css">
		

		
		<link rel="stylesheet" href="/css/monosocialiconsfont.css">
		

		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='/'> <span class="arrow">‚Üê</span>Home</a>
	
	<a href='/post'>Archive</a>
	<a href='/tags'>Tags</a>
	<a href='/about'>About</a>

	

	
</nav>


        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>
                        The Train Schedule
                    </h1>
                    <h2 class="headline">
                    Oct 1, 2017 00:00
                    ¬∑ 1783 words
                    ¬∑ 9 minutes read
                      <span class="tags">
                      
                      
                          
                              <a href="/tags/r">R</a>
                          
                              <a href="/tags/dataviz">DataViz</a>
                          
                      
                      
                      </span>
                    </h2>
                </header>
                
                <section id="post-body">
                    <p><img src="/img/train_schedule.png" width="300px" style="display: block; margin: auto;" /></p>
<p>This website needs content. I don‚Äôt really know what to write at the moment so I‚Äôm going to just start with a simple recreation of a famous old ( originally made 137 years ago) visualization to get things rolling. I could have chosen to write about Napoleon‚Äôs infamous march but <a href="https://robots.thoughtbot.com/analyzing-minards-visualization-of-napoleons-1812-march">plenty</a> <a href="https://datavizblog.com/2013/05/26/dataviz-history-charles-minards-flow-map-of-napoleons-russian-campaign-of-1812-part-5/">of</a> <a href="https://flowingdata.com/2008/07/17/is-minards-map-of-napoleons-march-the-greatest-statistical-graphic-ever/">people</a> <a href="https://www.youtube.com/watch?v=PYwwSHpPZdc">wrote</a> <a href="http://bigthink.com/strange-maps/229-vital-statistics-of-a-deadly-campaign-the-minard-map">about</a> <a href="http://fportman.com/blog/visualizing-napoleon-s-march-to-moscow/">that</a> <a href="https://cartographia.wordpress.com/2008/04/30/napoleons-invasion-of-russia/">already</a>.</p>
<p>I recently purchased a copy of <a href="The%20Visual%20Display%20of%20Quantitative%20Information">https://www.amazon.co.uk/Visual-Display-Quantitative-Information/dp/0961392142</a> by Edward Tufte. The cover image is a photo of E.J. Marey‚Äôs visualization of train scheduls for Paris to Lyon. I‚Äôll go ahead and try to recreate this in R.</p>
<p>First, let‚Äôs load the packages we need.</p>
<pre class="r"><code># Install readr because we need to interact with the outside world.
library(readr)

# Use tidyr cuz it&#39;s tidy
library(tidyr)

# Install dplyr because people that can manipulate data in R without it are
# pretentious at this point.
library(dplyr)

# Magrittr so I can use %&lt;&gt;%
library(magrittr)

# Use ggplot because the only reason I haven&#39;t learned Python yet is because
# plotting in Python is my nightmare.
library(ggplot2)

# Use lubridate because timestamps are the worst.  I hate them. So. Much.
library(lubridate)

# Fancy colors
library(viridis)

# Can&#39;t have a writeup without emojis
library(emo)</code></pre>
<p>Forunately, the fabled deity Mike Bostock <a href="https://bl.ocks.org/mbostock/5544008">has done this before</a> and <a href="https://gist.githubusercontent.com/mbostock/5544008/raw/446592acc3a9223ad268c7b051a68b814e40789c/schedule.tsv">uploaded the data to his github</a> already.</p>
<p>Let‚Äôs use that.</p>
<pre class="r"><code># td means &#39;Train Data&#39;
td &lt;- read_tsv(&quot;https://gist.githubusercontent.com/mbostock/5544008/raw/446592acc3a9223ad268c7b051a68b814e40789c/schedule.tsv&quot;)

td_backup &lt;- td

td &lt;- td_backup</code></pre>
<p>That‚Äôs nice. Let‚Äôs see what we just got.</p>
<pre class="r"><code>head(td)</code></pre>
<pre><code>## # A tibble: 6 x 34
##   number  type direction `stop|San Francisco|0|1` `stop|22nd Street|40|1`
##    &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;                   &lt;time&gt;                   &lt;chr&gt;
## 1    102     N         S                 04:55:00                  5:00am
## 2    104     N         S                 05:25:00                  5:30am
## 3    206     L         S                 06:11:00                  6:16am
## 4    208     L         S                 06:24:00                  6:29am
## 5    210     L         S                 06:44:00                  6:49am
## 6    312     B         S                 06:59:00                  7:04am
## # ... with 29 more variables: `stop|Bayshore|124|1` &lt;chr&gt;, `stop|So. San
## #   Francisco|178|1` &lt;chr&gt;, `stop|San Bruno|216|1` &lt;chr&gt;,
## #   `stop|Millbrae|249|2` &lt;chr&gt;, `stop|Broadway|280|2` &lt;chr&gt;,
## #   `stop|Burlingame|307|2` &lt;chr&gt;, `stop|San Mateo|334|2` &lt;chr&gt;,
## #   `stop|Hayward Park|354|2` &lt;chr&gt;, `stop|Hillsdale|391|2` &lt;chr&gt;,
## #   `stop|Belmont|428|2` &lt;chr&gt;, `stop|San Carlos|458|2` &lt;chr&gt;,
## #   `stop|Redwood City|499|2` &lt;chr&gt;, `stop|Atherton|543|3` &lt;chr&gt;,
## #   `stop|Menlo Park|574|3` &lt;chr&gt;, `stop|Palo Alto|604|3` &lt;chr&gt;,
## #   `stop|California Ave|649|3` &lt;chr&gt;, `stop|San Antonio|676|3` &lt;chr&gt;,
## #   `stop|Mountain View|702|3` &lt;chr&gt;, `stop|Sunnyvale|731|3` &lt;chr&gt;,
## #   `stop|Lawrence|757|4` &lt;chr&gt;, `stop|Santa Clara|805|4` &lt;chr&gt;,
## #   `stop|College Park|833|4` &lt;chr&gt;, `stop|San Jose|862|4` &lt;time&gt;,
## #   `stop|Tamien|906|4` &lt;chr&gt;, `stop|Capitol|939|5` &lt;chr&gt;, `stop|Blossom
## #   Hill|966|5` &lt;chr&gt;, `stop|Morgan Hill|997|6` &lt;chr&gt;, `stop|San
## #   Martin|1021|6` &lt;chr&gt;, `stop|Gilroy|1053|6` &lt;chr&gt;</code></pre>
<p>What am I looking at? SF, South SF, Millbrae, Burlingame, San Mateo, MPK, Palo Alto. The nightmare of the 101 commute is on my computer screen again. This is the train schedule for the Bay Area instead of Paris -&gt; Lyon. That‚Äôs gross and dissapointing.</p>
<p>Anyway, how many rows are in this table?</p>
<pre class="r"><code>nrow(td)</code></pre>
<pre><code>## [1] 122</code></pre>
<p>Let‚Äôs change the column names so they‚Äôre a bit easier to work with.</p>
<pre class="r"><code>colnames(td) &lt;- c(&quot;number&quot;, &quot;type&quot;, &quot;direction&quot;, &quot;san_francisco&quot;, &quot;22nd_street&quot;, 
    &quot;bayshore&quot;, &quot;so_san_francisco&quot;, &quot;san_bruno&quot;, &quot;millbrae&quot;, &quot;broadway&quot;, &quot;burlingame&quot;, 
    &quot;san_mateo&quot;, &quot;hayward_park&quot;, &quot;hillsdale&quot;, &quot;belmont&quot;, &quot;san_carlos&quot;, &quot;redwood_city&quot;, 
    &quot;atherton&quot;, &quot;menlo_park&quot;, &quot;palo_alto&quot;, &quot;california_ave&quot;, &quot;san_antonio&quot;, 
    &quot;mountainview&quot;, &quot;sunnyvale&quot;, &quot;lawrence&quot;, &quot;santaclara&quot;, &quot;college_park&quot;, &quot;san_jose&quot;, 
    &quot;tamien&quot;, &quot;capitol&quot;, &quot;blossom_hill&quot;, &quot;morgan_hill&quot;, &quot;san_martin&quot;, &quot;gilroy&quot;)

head(td)</code></pre>
<pre><code>## # A tibble: 6 x 34
##   number  type direction san_francisco `22nd_street` bayshore
##    &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;        &lt;time&gt;         &lt;chr&gt;    &lt;chr&gt;
## 1    102     N         S      04:55:00        5:00am   5:05am
## 2    104     N         S      05:25:00        5:30am   5:35am
## 3    206     L         S      06:11:00        6:16am        -
## 4    208     L         S      06:24:00        6:29am   6:34am
## 5    210     L         S      06:44:00        6:49am        -
## 6    312     B         S      06:59:00        7:04am        -
## # ... with 28 more variables: so_san_francisco &lt;chr&gt;, san_bruno &lt;chr&gt;,
## #   millbrae &lt;chr&gt;, broadway &lt;chr&gt;, burlingame &lt;chr&gt;, san_mateo &lt;chr&gt;,
## #   hayward_park &lt;chr&gt;, hillsdale &lt;chr&gt;, belmont &lt;chr&gt;, san_carlos &lt;chr&gt;,
## #   redwood_city &lt;chr&gt;, atherton &lt;chr&gt;, menlo_park &lt;chr&gt;, palo_alto &lt;chr&gt;,
## #   california_ave &lt;chr&gt;, san_antonio &lt;chr&gt;, mountainview &lt;chr&gt;,
## #   sunnyvale &lt;chr&gt;, lawrence &lt;chr&gt;, santaclara &lt;chr&gt;, college_park &lt;chr&gt;,
## #   san_jose &lt;time&gt;, tamien &lt;chr&gt;, capitol &lt;chr&gt;, blossom_hill &lt;chr&gt;,
## #   morgan_hill &lt;chr&gt;, san_martin &lt;chr&gt;, gilroy &lt;chr&gt;</code></pre>
<p>So what do we notice about our data?</p>
<ol style="list-style-type: decimal">
<li><p>The <code>number</code> field looks like a train number. We‚Äôll make a unique line for each <code>number</code> in our visualization.</p></li>
<li><p>San Francisco and San Jose are the start and stop points. They also have different time formats than the other fields. We should probably coerce all timestamps to the same format just for simplification purposes.</p></li>
<li><p>Direction indicates whether the train is moving from SF -&gt; San Jose or vice-versa.</p></li>
</ol>
<p>Let‚Äôs start by coercing the the different timestamps to the same timestamp format. For this we‚Äôll use the <code>lubridate::parse_date_time()</code> function.</p>
<p>The timestamps for the intermediate stations are in the format <code>%I:%M%p</code> e.g. <code>7:04am</code>.</p>
<p>Calling this function will yield: 0000-01-01 07:04:00</p>
<p>The SF and San Jose columns are in the more straightforward <code>%H:%M:%s</code> format.</p>
<pre class="r"><code>td %&lt;&gt;% mutate(san_francisco = as.POSIXct(format(parse_date_time(san_francisco, 
    &quot;%H:%M:%s&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), san_jose = as.POSIXct(format(parse_date_time(san_jose, 
    &quot;%H:%M:%s&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), `22nd_street` = as.POSIXct(format(parse_date_time(`22nd_street`, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), bayshore = as.POSIXct(format(parse_date_time(bayshore, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), so_san_francisco = as.POSIXct(format(parse_date_time(so_san_francisco, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), san_bruno = as.POSIXct(format(parse_date_time(san_bruno, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), millbrae = as.POSIXct(format(parse_date_time(millbrae, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), broadway = as.POSIXct(format(parse_date_time(broadway, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), burlingame = as.POSIXct(format(parse_date_time(burlingame, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), san_mateo = as.POSIXct(format(parse_date_time(san_mateo, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), hayward_park = as.POSIXct(format(parse_date_time(hayward_park, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), hillsdale = as.POSIXct(format(parse_date_time(hillsdale, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), belmont = as.POSIXct(format(parse_date_time(belmont, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), san_carlos = as.POSIXct(format(parse_date_time(san_carlos, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), redwood_city = as.POSIXct(format(parse_date_time(redwood_city, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), atherton = as.POSIXct(format(parse_date_time(atherton, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), menlo_park = as.POSIXct(format(parse_date_time(menlo_park, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), palo_alto = as.POSIXct(format(parse_date_time(palo_alto, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), california_ave = as.POSIXct(format(parse_date_time(california_ave, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), san_antonio = as.POSIXct(format(parse_date_time(san_antonio, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), mountainview = as.POSIXct(format(parse_date_time(mountainview, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), sunnyvale = as.POSIXct(format(parse_date_time(sunnyvale, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), lawrence = as.POSIXct(format(parse_date_time(lawrence, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), santaclara = as.POSIXct(format(parse_date_time(santaclara, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), college_park = as.POSIXct(format(parse_date_time(college_park, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), tamien = as.POSIXct(format(parse_date_time(tamien, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), capitol = as.POSIXct(format(parse_date_time(capitol, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), blossom_hill = as.POSIXct(format(parse_date_time(blossom_hill, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), morgan_hill = as.POSIXct(format(parse_date_time(morgan_hill, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), san_martin = as.POSIXct(format(parse_date_time(san_martin, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;), gilroy = as.POSIXct(format(parse_date_time(gilroy, 
    &quot;%I:%M%p&quot;), &quot;%H:%M:%S&quot;), format = &quot;%H:%M&quot;))

head(td)</code></pre>
<pre><code>## # A tibble: 6 x 34
##   number  type direction       san_francisco       `22nd_street`
##    &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;              &lt;dttm&gt;              &lt;dttm&gt;
## 1    102     N         S 2017-10-11 04:55:00 2017-10-11 05:00:00
## 2    104     N         S 2017-10-11 05:25:00 2017-10-11 05:30:00
## 3    206     L         S 2017-10-11 06:11:00 2017-10-11 06:16:00
## 4    208     L         S 2017-10-11 06:24:00 2017-10-11 06:29:00
## 5    210     L         S 2017-10-11 06:44:00 2017-10-11 06:49:00
## 6    312     B         S 2017-10-11 06:59:00 2017-10-11 07:04:00
## # ... with 29 more variables: bayshore &lt;dttm&gt;, so_san_francisco &lt;dttm&gt;,
## #   san_bruno &lt;dttm&gt;, millbrae &lt;dttm&gt;, broadway &lt;dttm&gt;, burlingame &lt;dttm&gt;,
## #   san_mateo &lt;dttm&gt;, hayward_park &lt;dttm&gt;, hillsdale &lt;dttm&gt;,
## #   belmont &lt;dttm&gt;, san_carlos &lt;dttm&gt;, redwood_city &lt;dttm&gt;,
## #   atherton &lt;dttm&gt;, menlo_park &lt;dttm&gt;, palo_alto &lt;dttm&gt;,
## #   california_ave &lt;dttm&gt;, san_antonio &lt;dttm&gt;, mountainview &lt;dttm&gt;,
## #   sunnyvale &lt;dttm&gt;, lawrence &lt;dttm&gt;, santaclara &lt;dttm&gt;,
## #   college_park &lt;dttm&gt;, san_jose &lt;dttm&gt;, tamien &lt;dttm&gt;, capitol &lt;dttm&gt;,
## #   blossom_hill &lt;dttm&gt;, morgan_hill &lt;dttm&gt;, san_martin &lt;dttm&gt;,
## #   gilroy &lt;dttm&gt;</code></pre>
<p>There‚Äôs probably a more elegant way to do that but whatever. Job done. #TextEditorsFTW</p>
<div id="visualizing" class="section level1">
<h1>Visualizing</h1>
<p>So the data should be in a rough enough format to start visualizing. Let‚Äôs do it.</p>
<p>First, let‚Äôs gather everything up so it‚Äôs easier to facet / group by station. For this we‚Äôll use <code>tidyr::gather()</code></p>
<pre class="r"><code>td_g &lt;- td %&gt;% gather(key = &quot;station&quot;, value = &quot;time&quot;, 4:ncol(td))

head(td_g)</code></pre>
<pre><code>## # A tibble: 6 x 5
##   number  type direction       station                time
##    &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;              &lt;dttm&gt;
## 1    102     N         S san_francisco 2017-10-11 04:55:00
## 2    104     N         S san_francisco 2017-10-11 05:25:00
## 3    206     L         S san_francisco 2017-10-11 06:11:00
## 4    208     L         S san_francisco 2017-10-11 06:24:00
## 5    210     L         S san_francisco 2017-10-11 06:44:00
## 6    312     B         S san_francisco 2017-10-11 06:59:00</code></pre>
<p>Just as a sanity check, we should have a bunch of new rows per train</p>
<pre class="r"><code>td_g %&gt;% filter(number == 102) %&gt;% head()</code></pre>
<pre><code>## # A tibble: 6 x 5
##   number  type direction          station                time
##    &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;              &lt;dttm&gt;
## 1    102     N         S    san_francisco 2017-10-11 04:55:00
## 2    102     N         S      22nd_street 2017-10-11 05:00:00
## 3    102     N         S         bayshore 2017-10-11 05:05:00
## 4    102     N         S so_san_francisco 2017-10-11 05:11:00
## 5    102     N         S        san_bruno 2017-10-11 05:15:00
## 6    102     N         S         millbrae 2017-10-11 05:19:00</code></pre>
<p>The order of the stations is important. Let‚Äôs factor the station field and set the levels to the correct order. The train number should also be a factor.</p>
<pre class="r"><code>td_g %&lt;&gt;% mutate(station = factor(station, levels = c(&quot;san_francisco&quot;, &quot;22nd_street&quot;, 
    &quot;bayshore&quot;, &quot;so_san_francisco&quot;, &quot;san_bruno&quot;, &quot;millbrae&quot;, &quot;broadway&quot;, &quot;burlingame&quot;, 
    &quot;san_mateo&quot;, &quot;hayward_park&quot;, &quot;hillsdale&quot;, &quot;belmont&quot;, &quot;san_carlos&quot;, &quot;redwood_city&quot;, 
    &quot;atherton&quot;, &quot;menlo_park&quot;, &quot;palo_alto&quot;, &quot;california_ave&quot;, &quot;san_antonio&quot;, 
    &quot;mountainview&quot;, &quot;sunnyvale&quot;, &quot;lawrence&quot;, &quot;santaclara&quot;, &quot;college_park&quot;, &quot;san_jose&quot;, 
    &quot;tamien&quot;, &quot;capitol&quot;, &quot;blossom_hill&quot;, &quot;morgan_hill&quot;, &quot;san_martin&quot;, &quot;gilroy&quot;)), 
    number = as.factor(number), direction = as.factor(direction))</code></pre>
<p>So the structure of the plot is: * Time is represented across the x-axis * The y-axis is each station * Each Train will be an individual line</p>
<p>We‚Äôre missing something important though, the distance the trains are traveling. How can we capture that? I bet that value is what was in the column names before we cleaned them üòü</p>
<p>Good thing we made a backup of the data in its raw imported form.</p>
<pre class="r"><code>cities &lt;- unique(td_g$station)

distance &lt;- c(0, 40, 124, 178, 216, 249, 280, 307, 334, 354, 391, 428, 458, 
    499, 543, 574, 604, 649, 676, 702, 731, 757, 805, 833, 862, 906, 939, 966, 
    997, 1021, 1053)

city_distances &lt;- data.frame(cities = cities, distance = distance)

head(city_distances)</code></pre>
<pre><code>##             cities distance
## 1    san_francisco        0
## 2      22nd_street       40
## 3         bayshore      124
## 4 so_san_francisco      178
## 5        san_bruno      216
## 6         millbrae      249</code></pre>
<p>Then let‚Äôs join that in to our <code>td_g</code> table.</p>
<pre class="r"><code>td_g %&lt;&gt;% inner_join(city_distances, by = c(station = &quot;cities&quot;))</code></pre>
<p>And finally, this should give us something close:</p>
<pre class="r"><code>ggplot(td_g %&gt;% filter(number != &quot;451&quot;, number != &quot;450&quot;, number != &quot;197&quot;, number != 
    &quot;196&quot;), aes(x = time, y = -distance, group = number, color = direction)) + 
    geom_line(size = 0.25) + theme_minimal() + theme(legend.position = &quot;top&quot;, 
    axis.title = element_blank()) + scale_y_continuous(labels = unique(td_g$station), 
    breaks = unique(-td_g$distance)) + scale_color_viridis(discrete = T, direction = -1, 
    option = &quot;B&quot;, end = 0.7)</code></pre>
<p><img src="/post/2017-10-01-the-train-schedule_files/figure-html/plot_try_one-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>To make this easier to look at let‚Äôs filter to just between 6am and noon.</p>
<pre class="r"><code>plot_df &lt;- td_g

ggplot(plot_df, aes(x = time, y = -distance, group = number, color = direction)) + 
    geom_line(size = 0.25) + theme_minimal() + theme(legend.position = &quot;none&quot;, 
    axis.title = element_blank(), panel.grid.minor = element_blank()) + scale_y_continuous(labels = cities, 
    breaks = -distance) + scale_color_manual(values = c(&quot;#F76F5CFF&quot;, &quot;#000004FF&quot;))</code></pre>
<p><img src="/post/2017-10-01-the-train-schedule_files/figure-html/filtered_plot-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>

                </section>
            </article>

            

            

            

            <footer id="footer">
    
    <p class="small">
    
       ¬© Copyright 2017 <i class="fa fa-heart" aria-hidden="true"></i> 
    
    </p>
    <p class="small">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/nodejh/hugo-theme-cactus-plus">nodejh</a>
    </p>
</footer>

        </section>

        <script src="/js/jquery-2.2.4.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>







    </body>
</html>
